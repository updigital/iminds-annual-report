var $event=$.event,$special,resizeTimeout;$special=$event.special.debouncedresize={setup:function(){$(this).on("resize",$special.handler)},teardown:function(){$(this).off("resize",$special.handler)},handler:function(e,t){var n=this,r=arguments,i=function(){e.type="debouncedresize";$event.dispatch.apply(n,r)};if(resizeTimeout){clearTimeout(resizeTimeout)}t?i():resizeTimeout=setTimeout(i,$special.threshold)},threshold:50};var Boxgrid=function(){function a(t){e.find("div.rb-week > div span").fitText(.3).end().find("span.rb-city").fitText(.5);f()}function f(){e.each(function(){var e=$(this),t=e.find("span.rb-close"),r=e.children("div.rb-overlay");e.on("click",function(){if(e.data("isExpanded")){return false}e.data("isExpanded",true);o=e.index();var t=l(e),a="rect("+t.top+"px "+(t.left+t.width)+"px "+(t.top+t.height)+"px "+t.left+"px)",f="rect(0px "+u.width+"px "+u.height+"px 0px)";r.css({clip:s?a:f,opacity:1,zIndex:9999,pointerEvents:"auto"});if(s){r.on(n,function(){r.off(n);setTimeout(function(){r.css("clip",f).on(n,function(){r.off(n);i.css("overflow-y","hidden")})},25)})}else{i.css("overflow-y","hidden")}});t.on("click",function(){i.css("overflow-y","auto");var t=l(e),u="rect("+t.top+"px "+(t.left+t.width)+"px "+(t.top+t.height)+"px "+t.left+"px)",a="auto";o=-1;r.css({clip:s?u:a,opacity:s?1:0,pointerEvents:"none"});if(s){r.on(n,function(){r.off(n);setTimeout(function(){r.css("opacity",0).on(n,function(){r.off(n).css({clip:a,zIndex:-1});e.data("isExpanded",false)})},25)})}else{r.css("z-index",-1);e.data("isExpanded",false)}return false})});$(window).on("debouncedresize",function(){u=c();if(o!==-1){e.eq(o).children("div.rb-overlay").css("clip","rect(0px "+u.width+"px "+u.height+"px 0px)")}})}function l(e){var t=r.scrollTop(),n=r.scrollLeft(),i=e.offset();return{left:i.left-n,top:i.top-t,width:e.outerWidth(),height:e.outerHeight()}}function c(){i.css("overflow-y","hidden");var e=r.width(),t=r.height();if(o===-1){i.css("overflow-y","auto")}return{width:e,height:t}}var e=$("#rb-grid > li"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"},n=t[Modernizr.prefixed("transition")],r=$(window),i=$("BODY"),s=Modernizr.csstransitions,o=-1,u=c();return{init:a}}()